<!DOCTYPE html>
<html lang="en">

{% load static %}

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filtrar</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'core/css/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <script>
              $(document).ready(function(){
          console.log("inicio correcto"); 

 $("#Buscar").click(function(){


  var valorSeleccionado = $("#tags").val();


  $("#vehiculos").empty();


            var arregloMarcas = [];

            var url = "https://vpic.nhtsa.dot.gov/api/vehicles/GetMakesForVehicleType/car?format=json";
            $.get(url,function(data){
                $.each(data.Results,function(i,elemento){
                    if(elemento.MakeName == valorSeleccionado )
                      {
                          $("#vehiculos").append("<tr> <td>" + elemento.MakeId + "</td> <td> " + elemento.MakeName + "</td><td>" + elemento.VehicleTypeId + "</td><td>" + elemento.VehicleTypeName + "</td></tr>");
                      }

                        arregloMarcas.push(elemento.MakeName);
                      })

                     $( "#tags" ).autocomplete({ source: arregloMarcas });
                    })
                    })
          $("#filtrar").click(function(){
            var arregloMarcas = [];
              console.log("Prueba Boton");
              var url = "https://vpic.nhtsa.dot.gov/api/vehicles/GetMakesForVehicleType/car?format=json";
              $.get(url,function(data){
                  $.each(data.Results,function(i,elemento){
                      //console.log(elemento);
                      //console.log(elemento.MakeName);
                      //console.log(elemento.VehicleTypeId);
                      //console.log(elemento.VehicleTypeName);
                     $("#vehiculos").append("<tr> <td>" + elemento.MakeId + "</td> <td> " + elemento.MakeName + "</td><td>" + elemento.VehicleTypeId + "</td><td>" + elemento.VehicleTypeName + "</td></tr>");
                     arregloMarcas.push(elemento.MakeName);
                  })

                  $( "#tags" ).autocomplete({ source: arregloMarcas });
              })
          })


      })
  </script>
  <body class="fondo">
    <header class="header bg-dark">
        <div class="container">
            <!--Navbar-->
            <nav class="row text-white justify-content-between align-items-center text-uppercase pt-4">
                <!--Logo-->
                <a href="#" class="col-auto text-reset">
                    <img src="{% static 'core/img/lightning.svg'%}" alt="Logo McQueen" class="img-logo">
                       McQueen
                </a> 
          
              
                <!--links-->
                <div class="col-auto">
                    <a href="{% url 'index' %}" class="text-reset pr-3">Home</a>
                    <a href="{% url 'infoauto' %}" class="text-reset pr-3">Nosotros</a>
                    <a href="{% url 'auto' %}" class="text-reset pr-3">Auto</a>
                    <a href="{% url 'usuario' %}" class="text-reset pr-3">Usuario</a>
                </div>
            </nav>
        </div>
    </header>


    <div class="container text-center centrado">
        <div class="row">
            <h1>
                <center>
                     Seleccione su vehiculo   
                </center>
    
            </h1>
        </div>
<div class="container-fluid">
      <div class="row">
        <button type="button" id="filtrar" class="btn btn-primary"> Solicitar Datos</button>
        <div style="float: right;">
<div class="row col-lg-10">
<label for="tags">Buscar Vehiculo: </label>
<input id="tags">
<button type="button" id="Buscar" class="btn btn-primary"> Buscar letra</button>
</div>
</div>
  </div>

    </div>
 
    <div class="row text-uppercase">
        <table class="table" id="vehiculos">
            <thead>
                <tr>
                    <th>#id</th>
                    <th>Nombre</th>
                    <th>Id Vehiculo</th>
                    <th>Tipo Vehiculo</th>
                </tr>
            </thead>
            <tbody>



            </tbody>
        </table>
    </div>
</div>

<div class="col-lg-12">
  <center>
      <a href="{% url 'index' %}" class="btn btn-primary butom">Volver</a> 
  </center>

</div>
<br>
<br>
<footer class="bg-dark text-white py-4">
    <div class="container">
        <nav class="row">
            <!--Logo-->
            <a href="#" class="col-3 text-reset text-uppercase d-flex align-item-center">
                <img src="{% static 'core/img/lightning.svg'%}" alt="Logo McQueen" class="img-logo mr-2">
                McQueen
            </a>
            <!--Menu-->
            <ul class="col-3 list-unstyled">
                <li class="font-weight-bold text-uppercase">Listas</li>
                <li><a href="#" class="text-reset">Relleno 1</a></li>
                <li><a href="#" class="text-reset">Relleno 2</a></li>
                <li><a href="#" class="text-reset">Relleno 3</a></li>
                <li><a href="#" class="text-reset">Relleno 4</a></li>
            </ul>
            <!--Menu 2-->
            <ul class="col-3 list-unstyled">
                <li class="font-wight-bold text-uppercase">Reosurce</li>
                <li><a href="#" class="text-reset">Relleno 1</a></li>
                <li><a href="#" class="text-reset">Relleno 2</a></li>
                <li><a href="#" class="text-reset">Relleno 3</a></li>
                <li><a href="#" class="text-reset">Relleno 4</a></li>
            </ul>
            <!--Social network-->
            <ul class="col-3 list-unstyled">
                <li class="font-wight-bold text-uppercase">Redes Sociales</li>
                <li class="d-flex justify-content-between">
                    <a href="#" class="text-reset"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="text-reset"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="text-reset"><i class="fab fa-instagram"></i></a>
                </li>

            </ul>
        </nav>
    </div>
</footer>
    





<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
</body>
</html>
